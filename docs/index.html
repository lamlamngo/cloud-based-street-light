<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Lam Ngo - Smart Street Light System</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Custom styles for this template -->
    <link href="css/clean-blog.min.css" rel="stylesheet">
    <link href="css/mdb.min.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="css/style.min.css" rel="stylesheet">
  </head>

  <body>

    <!-- Navigation Bar Section -->
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar">
      <div class="container">

        <!-- Brand -->
        <a class="navbar-brand" href="#" target="_blank">
          <strong>Lam Ngo</strong>
        </a>

        <!-- Collapse -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
          aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Links -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

          <!-- Left -->
          <ul class="navbar-nav mr-auto">
          </ul>

          <!-- Right -->
          <ul class="navbar-nav nav-flex-icons">
            <li class="nav-item active">
              <a class="nav-link" href="http://lamsonbango.com">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Software
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="https://github.com/lamsonbango/micromouse-arduino/blob/master/Arduino/2017/Micromouse.ino">Modified Floodfill Algorithm</a>
                <a class="dropdown-item" href="https://cs-gitlab.union.edu/ngol/blockchain-message-backup">Decentrailized Message Application</a>
                <a class="dropdown-item" href="#">Improving Human-Robot Interaction</a>
                <a class="dropdown-item" href="https://github.com/lamsonbango/graphical-editor">Interactive Java Games</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Embedded Systems
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="http://lamsonbango.com/micromouse-arduino/">Autonomous Robotics</a>
                <a class="dropdown-item" href="http://lamsonbango.com/micromouse-arduino/">Modfied Google Assistant</a>
                <a class="dropdown-item" href="http://lamsonbango.com/cloud-based-street-light/">IoT:Smart Streetlight System</a>
                <a class="dropdown-item" href="https://muse.union.edu/2018capstone-ngol/">Powered Mobility for Young Disabled Children</a>
                <a class="dropdown-item" href="#">Bluetooth modules for Arduino</a>
                <a class="dropdown-item" href="audio.html">Audio Amplifier</a>
                <a class="dropdown-item" href="#">Radio</a>
              </div>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Films
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">Filmmaking: The Spoon Warrior</a>
                <a class="dropdown-item" href="#">Filmmaking: An International Experience</a>
                <a class="dropdown-item" href="#">Gender Politics in <i>Hero</i> and <i>Crouching Tiger Hidden Dragon</i></a>
                <a class="dropdown-item" href="#">Reinventing the Family in <i>La cage aux folles</i> and <i>Wild Side</i></a>
                <a class="dropdown-item" href="#">Demolitions and its effects on personal lives and relations</a>
                <a class="dropdown-item" href="#"><i>The Goddess</i>, <i>New Women</i>, and <i>The Red Detachment of Women</i>: Striving Toward Gender Equality</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="http://lamsonbango.com/#aboutme">About Me</a>
            </li>
            <li class="nav-item">
              <a href="https://www.facebook.com/lam.lunglinh.3" class="nav-link" target="_blank">
                <i class="fa fa-facebook"></i>
              </a>
            </li>
            <li class="nav-item">
              <a href="https://twitter.com/ngol180" class="nav-link" target="_blank">
                <i class="fa fa-twitter"></i>
              </a>
            </li>
            <li class="nav-item">
              <a href="https://github.com/lamsonbango" class="nav-link border border-light rounded waves-effect waves-light"
                target="_blank">
                <i class="fa fa-github mr-2"></i>Personal GitHub
              </a>
            </li>
          </ul>

        </div>

      </div>
    </nav>

    <!-- Page Header -->
    <header class="masthead" style="background-image: url('https://lh3.googleusercontent.com/U6fpCdo3WIgOtiM8ZrtnB73rLmI45AJlez1N6DPwkrggtlCzZTkV-xoeGa2r1EWey4fydArLSXbVAMfFy0BOpX2UswBLr51eAeZieBdr-uQ_nnK7Na33wLCHpHgttXQOqIcvw5wcRhR4vebqBqkN4Xcv4DcoqFiMw4ahigV-uHXkS6hOUSqJTs6EVNRp4SVRmgq6zP9g4w6ghYBKoHX8Cw70lAxThFxzwnJvTCITKesFbJnXDueEPBfTGdJUkTsOxU02t3QMzaTQXds2Dh-Ehd1dwPYMgfe5ad0XqsiIRrYjy4QcvbLLCFuc-hko-hkMAXpC10R69KKXn0-8pgPoUDxOfsmu5FclSJVW8VWddj7z3MvXuByMmOYHtaCfLp6bCy1aT9h6SQsSBlTlAJBfXbcF2F-8VcL6lwo1JlDdSehjjyK0bflnaW_UK1KFqYJhuEnc-PJ0zP089eRY9TgF7Cdow5KWbk35zybFCCkKfTeJr4vi217cyeA5pXu6c3VOvZ_yD5ebSOhLLUmsuobm-yTZW4pIiXPmqoVPWPRD5Aov1f3atkXnIFlF3uqjs2fFF34N-Oo4wqVaFl2DRIFyTJLbS5aCZucUNE-Qxsc=w1200-h900-no'); background-repeat: no-repeat; background-size: cover;">
      <div class="overlay"></div>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="post-heading">
              <h1>Smart Streetlight System</h1>
              <h2 class="subheading">Nobody ever said that a streetlight can be smart?</h2>
              <span class="meta">Posted by
                <a href="#">Lam Ngo</a>
                on August 24, 2017</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Post Content -->
    <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <p class="h5 my-4">Video Demonstration</p>
            <iframe class="embed-responsive-item" src="https://newyork6.hosted.panopto.com/Panopto/Pages/Embed.aspx?id=49a1cfd7-7595-44f2-8526-5013d79ce316&v=1" width="693" height="405" style="padding: 0px; border: 0px solid #464646;" frameborder="0" allowfullscreen allow="autoplay"></iframe>

            <p class="h5 my-4">Why this project?</p>
            <p>Around the world, enormous electricity energy is consumed and wasted by street lights, which are often
automatically turned on when it becomes dark and automatically turned off when it becomes bright.
Many countries, for an instance my own country Vietnam, have street lights turn on for the whole day. This
is a huge waste of energy and also affect the environment and should be changed. My smart street light
system can operate on their own, depending on the surrounding environment and depending on whether
there are people near it or not. For example, during the night, when there are no people, the street lights
are turned off to preserve energy. As soon as there are people and vehicles around, the lights will be turned
on and off again when they have all left the city block. This will help save energy and still have the same
functionalities as old street lights at the same time.</p>

<p>In addition, safety is one of the utmost concerns in our society nowadays. Just a few months ago, in a pedestrian
street in Sweden, a stolen truck ran into and injured a lot of people (http://www.cnn.com/2017/
04/07/europe/stockholm-truck-crash/). In 2016, the same situation happened in one of the worst terrorist attacks in France history. If you actually think about it, things like this can happen very easily as streets are accessible
to everyone, without security checks. There are police patrolling, but that is not enough to spot potential
dangers, so I decide to create a safe city block for people. At the beginning, I wanted to implement an security
check where everyone needs to have a valid ID and password in order to enter the street, which might
seem inconvenient at first, but in the long run, if you can control and know who enters a street, you can
increase the chance of preventing these horrible attacks from happening. However, due to time constraint,
I was not able to do that, and replaced the idea with a simple gate. </p>

<p><strong>Thus, I made this proof of concept for a smart street light system to show case IoT's practical applications!</strong></p>


<p class="h5 my-4">Implementation</p>

<p>My proof of concept consists of four light post. At each of those two posts, a photoresistor and a DS18b20 are placed to record the
current temperature and the current light condition. The DS18b20 temperature sensor inside our kit is a 1-
wire device, and can be used to measure temperature. It is fairly precise (0.5C over much of the range) and
can give up to 12 bits of precision from the onboard digital-to-analog converter. Connecting and operating
this sensor to the Feather is more challenging than the above, as it uses Dallas 1-wire protocol. It can work
with the Feather using a single digital pin, which is a great thing, as I can use one pin to control two sensors.
Also, I will need to place a 4.7 kΩ as a pull-up from the DATA to VCC line and use 1-wire Arduino library.
The photoresistors, or photocells, are analog sensors and take up two analog pins of the feather.</p>

<img src="https://lh3.googleusercontent.com/3tR4Fqg-u_GzLcbIWuOdoCRV5TKtMM5oSpgOqEaVonX_KxQDKvjYgHOlRjclDpJLYOhNQexYthKcoLjn9c17FA_7XEAYtswx1hZ2EF29b8MCDdHCCbTvaRYzbsHDIpDRGKafLkrXO42wIpRQVwzAiGaPy_gn9najf-EgOtRg47H-s3Ob0iNPJRWB4CcP33fCcC057ii7ZsTibsMqf4oUaE8Q1e5FHkRs2rvJbAIMy3b3jEYcQfY52SQwGunBDyeWpF6vO3Q932LD5bJcjqlEzN_1aD8Y8QYQnvBhzhMIgbd0ACehAdHpA1826wx5dzeMp9ffc4Q2s58EkEZoavY4tE8-nJhRn1l5MYSGrdgGDbyvODnBoEe3vBAaF-_oJ9vxSVHRiqwDjzyFfXDhXZy9IQitAvoyEetnCHtWhWegYkBDZdM6J3NUWELwBjSPskj-UfC-3-vOWtg9yrfWi8-9koqxFd9UZhb8NaWkSYj_SOep1DCQw2yT3qq8RdqHPnwmXs1_H_KxHdfZ-n4sjfW8VxAQRPN7aJkb0EXK04mg95cOL5nXE6PBpqzfkyxIaJ-1KQf1_T2GdFaHhOk6oW8UZ0bA0s32IT8dOqzG_UY=w1116-h900-no" class="img-fluid" alt="">

<br></br>
<p>In addition to light post sensing, I have a break-beam sensor at the entry of city block, a distance sensor
after the gate and another distance sensor at the exit of my city block. They are all driven by interrupts. It
is implemented this way because the feather is single-threaded and could not handle two different tasks at
the same time. Whenever the break-beam sensor is triggered, it will increment a vehicle counter and raise
the gate. The digital sensor, whenever it detects something, it will lower the gate, and the other digital
sensor is used to decrement the car counter, as whenever a vehicle crossed it, it is leaving my city block.
However, the sensor in the middle is not working during my demonstration. These sensors are also used with the cloud.</p>

<img src = "https://lh3.googleusercontent.com/72VRdPoQ6t5tjh06622VQ-3MTP3y5QhhyfU3wYvM-JOMFmi6hKyduvlAvt3IPlSVyl5fX4dwzv0fhq18pwn5tAQCqCbCxtFPgLY4U3Sh8CM5aXgDqz6J5i_fKzyXHOUQpSLS7_bFuwEiwGj5y3wuniCUycZiQA3CYygp20m_srQSHE3H2C7g3fL408K9OR1Je3n-D2_eXSyd4TM7pYew55_7YQHSOerHeEWEdcFyr_fRFUDJkFLJ5_gVIAq96KOyMuaFfCg5z2z1pKQCRKEHYxI9wExfW1GheBAr5FJtmBoe26-HsuQYNIB1GGkWTOIyfl_67wJuQ8h2DEVqBdKFLOT4PltABY_zc9KSk95cTfjDrdCEnHG1R-p_M0nM3ssjhWeLYw36w6pYnYqpna1HTqk15VbyLdxCBdTudagC4RNXtDuCV_JmcCJckVB-w-6TzYGAypq29xuAcHU_Ceb5OZF-AnfAHrD_z37EIuBWGj2ajCiCrKSnvdFVnUFCOF9X2TYH0uWsXd9qziZekid27mni8m1GJVPajlB9RRvoHIAC3V8ZQ6D2KwcefmR7-ejejqnIw1muF2O1rD4PNQ3C883ClmmiDCbGtIPToWU=w1266-h949-no" class="img-fluid" alt="">

<p class="h5 my-4">Cloud Integration</p>
<p>My smart city square communicates with the cloud quite heavily. Every ten seconds, the feather would
automatically gather sensor readings from the two photocells and the two DS18b20 temperature sensors,
and send it up to the cloud to be saved into a dynamoDB table. To make it easier for others to access it, I
have a table with only the latest value. This information will be available to everyone and how to access it
will be given in the next section. The hash key is the Arduino time the values were recorded.
In addition, I have a break-beam sensor at the entry of my city, and every time it is triggered, a carcounter
is incremented. Every second, the Feather would automatically gather readings from the two photocells,
along with the counter of the number of vehicles in my block, which is incremented by the break-beam
sensor at the entry and a digital distance sensor at the exit, and send it up to the cloud. The lambda
function (DecideState) would calculate the average of the reading and decide what my light state should
be and send it back to the Feather using callback functions. The value being sent back is either 1 or 0, as to
indicate whether light stays on or off. This capability is executed by sending a POST request to the correct
lambda function. For a better understanding of my information flow, refers to the figure below.
Moreover, as I am directly below a city block with heavy traffic, I also keep track of the number of vehicles
currently in my street, so the next block can have a better understanding of how to control the traffic. As mentioned in the previous paragraph, I keep a counter, which is incremented and decremented by the
break-beam sensor at the entry and a digital distance at the exit of my city block. Every time the breakbeam
sensor, in addition to the GetState capability above, the Feather would also send the current counter
to replace the current counter in a DynamoDB table. The table has only one entry, that is the current number
of vehicles in my city, and is available to others.</p>

<p class="h5 my-4">Report</p>
<p>I wrote a paper detailing every steps needed to implement this project together with all external JSON models and AWS configurations. Access it here </p>
          </div>
        </div>
      </div>
    </article>

    <hr>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="copyright text-muted">Copyright &copy; Lam Ngo 2018</p>
          </div>
        </div>
      </div>
    </footer>

    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="js/mdb.min.js"></script>
    <!-- Initializations -->
    <script type="text/javascript">
      // Animations initialization
      new WOW().init();
    </script>

  </body>

</html>
